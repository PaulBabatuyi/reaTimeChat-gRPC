# Real-Time Chat API

Production-ready gRPC chat service with bidirectional streaming, JWT auth, and rate limiting.

## Features
- ✅ Real-time 1-on-1 messaging via gRPC streams
- ✅ JWT authentication with key rotation
- ✅ Rate limiting on auth endpoints
- ✅ MongoDB persistence with optimized indexes
- ✅ Optional TLS/mTLS
- ✅ Multiple concurrent sessions per user

## Quick Start

### Prerequisites
- Go 1.25+
- MongoDB 6.0+
- Docker (optional)

### Environment Variables
```bash
MONGODB_URI=mongodb://localhost:27017
JWT_SECRET=your-secret-key-here
PORT=50051  # optional, defaults to 50051
RATE_LIMIT_RPM=10  # requests per minute for Register/Login
TLS_CERT=server.crt  # optional
TLS_KEY=server.key   # optional
```

### Run Locally
```bash
# Start MongoDB
docker compose up -d mongo

# Run server
export MONGODB_URI=mongodb://localhost:27017
export JWT_SECRET=my-secret
go run ./cmd/api

# Run tests
go test ./... -v
```

### Docker Deployment
```bash
docker compose up -d
```

## Architecture
```
cmd/api/          - gRPC server & handlers
internal/auth/    - JWT manager
internal/data/    - MongoDB repositories
internal/db/      - DB client & indexes
internal/middleware/ - Rate limiter
proto/chat/v1/    - Protobuf definitions
```

## API Endpoints
See `chat/v1/chat.proto` for full API spec.

## Contributing
1. Fork repo
2. Create feature branch
3. Add tests
4. Submit PR

## License
MIT